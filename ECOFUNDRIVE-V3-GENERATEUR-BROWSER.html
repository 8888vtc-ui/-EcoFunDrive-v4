<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOFUNDRIVE V3 - G√©n√©rateur Browser</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #1877f2 0%, #0c5dd8 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        .content { padding: 40px; }
        .section { margin-bottom: 40px; }
        .section h2 { color: #1877f2; margin-bottom: 20px; font-size: 1.8em; }
        .api-status { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .api-card { background: #f8f9fa; border-radius: 15px; padding: 20px; border-left: 4px solid #1877f2; }
        .api-card h3 { color: #333; margin-bottom: 10px; }
        .api-card .status { font-weight: bold; padding: 5px 10px; border-radius: 5px; display: inline-block; }
        .status-active { background: #d4edda; color: #155724; }
        .status-inactive { background: #f8d7da; color: #721c24; }
        .keywords-section { background: #f8f9fa; border-radius: 15px; padding: 30px; }
        .keyword-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 20px; }
        .keyword-item { background: white; border-radius: 10px; padding: 15px; border: 2px solid #e9ecef; transition: all 0.3s; }
        .keyword-item:hover { border-color: #1877f2; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .keyword-item h4 { color: #1877f2; margin-bottom: 8px; }
        .keyword-item p { color: #666; font-size: 0.9em; }
        .generate-btn { background: linear-gradient(135deg, #1877f2 0%, #0c5dd8 100%); color: white; border: none; padding: 20px 40px; font-size: 1.2em; border-radius: 10px; cursor: pointer; transition: all 0.3s; display: block; margin: 30px auto; }
        .generate-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(24, 119, 242, 0.3); }
        .generate-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
        .progress { background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 20px 0; display: none; }
        .progress-bar { background: #e9ecef; border-radius: 5px; height: 20px; overflow: hidden; margin-bottom: 10px; }
        .progress-fill { background: linear-gradient(90deg, #1877f2, #0c5dd8); height: 100%; width: 0%; transition: width 0.3s; }
        .results { background: #f8f9fa; border-radius: 15px; padding: 30px; margin-top: 30px; display: none; }
        .result-item { background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #28a745; }
        .download-btn { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; margin: 10px 5px; }
        .download-btn:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ ECOFUNDRIVE V3</h1>
            <p>G√©n√©rateur de Site Complet - Pure Browser (Sans Node.js)</p>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>üîç Statut des APIs</h2>
                <div class="api-status" id="apiStatus">
                    <div class="api-card">
                        <h3>ü§ñ OpenAI API</h3>
                        <span class="status status-inactive">Test en cours...</span>
                    </div>
                    <div class="api-card">
                        <h3>üß† Anthropic API</h3>
                        <span class="status status-inactive">Test en cours...</span>
                    </div>
                    <div class="api-card">
                        <h3>üñºÔ∏è Replicate API</h3>
                        <span class="status status-inactive">Test en cours...</span>
                    </div>
                    <div class="api-card">
                        <h3>üöÄ Netlify API</h3>
                        <span class="status status-inactive">Test en cours...</span>
                    </div>
                </div>
            </div>

            <div class="section keywords-section">
                <h2>üéØ Mots-cl√©s S√©lectionn√©s (10)</h2>
                <div class="keyword-list">
                    <div class="keyword-item">
                        <h4>üèñÔ∏è plage-privee-saint-tropez</h4>
                        <p>Beach Authority Saint-Tropez</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üèñÔ∏è beach-club-exclusif-saint-tropez</h4>
                        <p>Beach Mythique Trafic √âNORME</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üçΩÔ∏è restaurant-lounge-monaco</h4>
                        <p>Restaurant Iconique Monaco</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üè® palace-luxe-monaco</h4>
                        <p>Palace Prestige Monaco</p>
                    </div>
                    <div class="keyword-item">
                        <h4>‚õ≥ golf-privilege-monte-carlo</h4>
                        <p>Golf de Luxe Monaco</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üèñÔ∏è plage-prestige-cannes</h4>
                        <p>Beach Mythique Cannes</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üè® hotel-exception-nice</h4>
                        <p>H√¥tel Iconique Nice</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üöó vtc-nice-a√©roport</h4>
                        <p>VTC Volume R√âEL + BUSINESS</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üöó chauffeur-prive-saint-tropez</h4>
                        <p>VTC Luxe Saint-Tropez</p>
                    </div>
                    <div class="keyword-item">
                        <h4>üåç nice-airport-transfer</h4>
                        <p>INTERNATIONAL VOLUME MAX</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <button class="generate-btn" id="generateBtn" onclick="startGeneration()">
                    üöÄ LANCER G√âN√âRATION SITE COMPLET
                </button>
                
                <div class="progress" id="progress">
                    <h3>üìä G√©n√©ration en cours...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">Initialisation...</p>
                </div>

                <div class="results" id="results">
                    <h2>üéâ G√©n√©ration Termin√©e !</h2>
                    <div id="resultsContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration des APIs (utilisez des variables d'environnement en production)
        const API_CONFIG = {
            openai: process.env.OPENAI_API_KEY || '',
            anthropic: process.env.ANTHROPIC_API_KEY || '',
            replicate: process.env.REPLICATE_API_TOKEN || '',
            netlify: {
                token: process.env.NETLIFY_TOKEN || '',
                siteId: process.env.NETLIFY_SITE_ID || ''
            }
        };

        // V√©rification des cl√©s API (uniquement en d√©veloppement)
        if (process.env.NODE_ENV !== 'production') {
            const requiredVars = [
                'OPENAI_API_KEY',
                'ANTHROPIC_API_KEY',
                'REPLICATE_API_TOKEN',
                'NETLIFY_TOKEN',
                'NETLIFY_SITE_ID'
            ];
            
            const missingVars = requiredVars.filter(varName => !process.env[varName]);
            if (missingVars.length > 0) {
                console.warn('Attention: Les variables d\'environnement suivantes sont manquantes:', missingVars.join(', '));
                console.warn('Cr√©ez un fichier .env.local √† la racine du projet avec ces variables.');
            }
        }

        const KEYWORDS = [
            'plage-privee-saint-tropez', 'beach-club-exclusif-saint-tropez', 'restaurant-lounge-monaco',
            'palace-luxe-monaco', 'golf-privilege-monte-carlo', 'plage-prestige-cannes',
            'hotel-exception-nice', 'vtc-nice-aeroport', 'chauffeur-prive-saint-tropez', 'nice-airport-transfer'
        ];

        // Templates de contenu
        const CONTENT_TEMPLATES = {
            beach: (keyword, location) => `
                <h1>${keyword.replace(/-/g, ' ').toUpperCase()}: Guide Complet 2024</h1>
                <p>D√©couvrez ${keyword.replace(/-/g, ' ')} √† ${location}, une destination exceptionnelle sur la C√¥te d'Azur. Cette plage mythique attire une client√®le internationale en qu√™te d'authenticit√© et de luxe.</p>
                
                <h2>Pourquoi choisir ${keyword.replace(/-/g, ' ')}?</h2>
                <p>Situ√©e dans le cadre prestigieux de ${location}, cette plage embl√©matique offre des services exceptionnels et une ambiance unique. Le sable fin, l'eau cristalline et les restaurants de luxe cr√©ent une exp√©rience inoubliable.</p>
                
                <h3>Services et Prestations</h3>
                <ul>
                    <li>Restaurant gastronomique avec vue mer</li>
                    <li>Transparence priv√©e et VIP</li>
                    <li>Service de VTC ECOFUNDRIVE depuis Nice</li>
                    <li>√âquipements de plage premium</li>
                    <li>Bar et restaurant sur la plage</li>
                </ul>
                
                <h2>Acc√®s et Transfert</h2>
                <p>R√©servez votre VTC ECOFUNDRIVE pour un transfert direct depuis l'a√©roport de Nice vers ${keyword.replace(/-/g, ' ')}. Nos chauffeurs professionnels vous assurent un voyage confortable et ponctuel.</p>
                
                <h3>Informations Pratiques</h3>
                <p><strong>Adresse:</strong> Plage de ${location.split('-')[0]}, France<br>
                <strong>Acc√®s:</strong> VTC depuis Nice - 1h30 de route<br>
                <strong>R√©servation:</strong> +33 6 16 55 28 11</p>
                
                <h2>FAQ - Questions Fr√©quentes</h2>
                <div class="faq">
                    <p><strong>Comment acc√©der √† ${keyword.replace(/-/g, ' ')} depuis Nice?</strong><br>
                    R√©servez votre VTC ECOFUNDRIVE au +33 6 16 55 28 11 pour un transfert direct depuis l'a√©roport de Nice.</p>
                    <p><strong>Quels services sont disponibles sur place?</strong><br>
                    Restaurant, bar, transparences priv√©es, √©quipements de plage.</p>
                </div>
                
                <div class="cta-section">
                    <h2>üöó R√©servez votre VTC ECOFUNDRIVE</h2>
                    <p>Pour un transfert confortable vers ${keyword.replace(/-/g, ' ')}, contactez-nous:</p>
                    <div class="contact-info">
                        <p><strong>T√©l√©phone:</strong> +33 6 16 55 28 11</p>
                        <p><strong>WhatsApp:</strong> <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a></p>
                        <p><strong>Email:</strong> 8888vtc@gmail.com</p>
                    </div>
                </div>
            `,
            
            restaurant: (keyword, location) => `
                <h1>${keyword.replace(/-/g, ' ').toUpperCase()}: Exp√©rience Gastronomique</h1>
                <p>D√©couvrez ${keyword.replace(/-/g, ' ')}, une institution culinaire √† ${location}. Ce restaurant iconique offre une cuisine exceptionnelle dans un cadre somptueux.</p>
                
                <h2>Une Cuisine d'Exception</h2>
                <p>${keyword.replace(/-/g, ' ')} propose une exp√©rience gastronomique unique, m√™lant tradition et innovation. Les chefs talentueux cr√©ent des plats m√©morables avec des produits frais et locaux.</p>
                
                <h3>Sp√©cialit√©s et Signature</h3>
                <ul>
                    <li>Sp√©cialit√©s m√©diterran√©ennes revisit√©es</li>
                    <li>Produits locaux et saisonniers</li>
                    <li>Carte des vins exceptionnelle</li>
                    <li>Desserts artisanaux</li>
                </ul>
                
                <h2>Acc√®s en VTC de Luxe</h2>
                <p>Arrivez en style √† ${keyword.replace(/-/g, ' ')} avec notre service VTC premium. ECOFUNDRIVE vous assure un transfert confortable depuis votre h√¥tel ou l'a√©roport.</p>
                
                <div class="cta-section">
                    <h2>üöó Votre Transfert VTC Priv√©</h2>
                    <p>R√©servez votre VTC ECOFUNDRIVE pour d√Æner √† ${keyword.replace(/-/g, ' ')}:</p>
                    <div class="contact-info">
                        <p><strong>T√©l√©phone:</strong> +33 6 16 55 28 11</p>
                        <p><strong>WhatsApp:</strong> <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a></p>
                        <p><strong>Email:</strong> 8888vtc@gmail.com</p>
                    </div>
                </div>
            `,
            
            hotel: (keyword, location) => `
                <h1>${keyword.replace(/-/g, ' ').toUpperCase()}: H√¥tel de Luxe</h1>
                <p>Bienvenue √† ${keyword.replace(/-/g, ' ')}, un palace prestigieux situ√© au c≈ìur de ${location}. Cet √©tablissement de luxe offre une exp√©rience inoubliable.</p>
                
                <h2>Luxe et Comfort</h2>
                <p>${keyword.replace(/-/g, ' ')} allie √©l√©gance, confort et service exceptionnel. Chaque d√©tail est pens√© pour garantir un s√©jour m√©morable dans un cadre somptueux.</p>
                
                <h3>Services et Prestations</h3>
                <ul>
                    <li>Chambres et suites de luxe</li>
                    <li>Spa et centre de bien-√™tre</li>
                    <li>Restaurants gastronomiques</li>
                    <li>Service de conciergerie</li>
                    <li>VTC ECOFUNDRIVE disponible 24/7</li>
                </ul>
                
                <h2>Transfert depuis l'A√©roport</h2>
                <p>ECOFUNDRIVE assure votre transfert depuis l'a√©roport de Nice vers ${keyword.replace(/-/g, ' ')}. Service premium et ponctuel garanti.</p>
                
                <div class="cta-section">
                    <h2>üöó Votre VTC Priv√©</h2>
                    <p>R√©servez votre transfert avec ECOFUNDRIVE:</p>
                    <div class="contact-info">
                        <p><strong>T√©l√©phone:</strong> +33 6 16 55 28 11</p>
                        <p><strong>WhatsApp:</strong> <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a></p>
                        <p><strong>Email:</strong> 8888vtc@gmail.com</p>
                    </div>
                </div>
            `,
            
            vtc: (keyword, location) => `
                <h1>${keyword.replace(/-/g, ' ').toUpperCase()}: VTC Premium C√¥te d'Azur</h1>
                <p>ECOFUNDRIVE vous offre un service VTC de luxe sur la C√¥te d'Azur. Transferts professionnels, confortables et ponctuels.</p>
                
                <h2>Service VTC Excellence</h2>
                <p>Notre service ${keyword.replace(/-/g, ' ')} garantit confort, s√©curit√© et ponctualit√©. Chauffeurs professionnels, v√©hicules premium, service 24/7.</p>
                
                <h3>Nos Services</h3>
                <ul>
                    <li>Transferts a√©roport/h√¥tel</li>
                    <li>Mises √† disposition journ√©e</li>
                    <li>√âv√©nements et affaires</li>
                    <li>Tourisme et visites</li>
                    <li>V√©hicules Tesla et premium</li>
                </ul>
                
                <h2>Zone de Service</h2>
                <p>Nous couvrons toute la C√¥te d'Azur: Nice, Cannes, Monaco, Saint-Tropez et environs. Service disponible 24h/24 et 7j/7.</p>
                
                <div class="cta-section">
                    <h2>üöó R√©servez Votre VTC</h2>
                    <p>Contactez ECOFUNDRIVE pour votre r√©servation:</p>
                    <div class="contact-info">
                        <p><strong>T√©l√©phone:</strong> +33 6 16 55 28 11</p>
                        <p><strong>WhatsApp:</strong> <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a></p>
                        <p><strong>Email:</strong> 8888vtc@gmail.com</p>
                    </div>
                </div>
            `
        };

        // Fonction pour d√©terminer le template
        function getTemplate(keyword) {
            if (keyword.includes('plage') || keyword.includes('beach')) {
                return CONTENT_TEMPLATES.beach(keyword, keyword.split('-').pop());
            } else if (keyword.includes('hotel') || keyword.includes('metropole') || keyword.includes('negresco') || keyword.includes('martinez')) {
                return CONTENT_TEMPLATES.hotel(keyword, keyword.split('-').pop());
            } else if (keyword.includes('buddha') || keyword.includes('petite-maison') || keyword.includes('louis')) {
                return CONTENT_TEMPLATES.restaurant(keyword, keyword.split('-').pop());
            } else {
                return CONTENT_TEMPLATES.vtc(keyword, keyword.split('-').pop());
            }
        }

        // Test des APIs
        async function testAPIs() {
            const results = {
                openai: false,
                anthropic: false,
                replicate: false,
                netlify: false
            };

            // Test OpenAI
            try {
                const response = await fetch('https://api.openai.com/v1/models', {
                    headers: { 'Authorization': `Bearer ${API_CONFIG.openai}` }
                });
                results.openai = response.ok;
            } catch (e) { results.openai = false; }

            // Test Anthropic
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'x-api-key': API_CONFIG.anthropic,
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: "claude-3-haiku-20240307",
                        max_tokens: 10,
                        messages: [{ role: "user", content: "test" }]
                    })
                });
                results.anthropic = response.ok;
            } catch (e) { results.anthropic = false; }

            // Test Replicate
            try {
                const response = await fetch('https://api.replicate.com/v1/models', {
                    headers: { 'Authorization': `Token ${API_CONFIG.replicate}` }
                });
                results.replicate = response.ok;
            } catch (e) { results.replicate = false; }

            // Test Netlify
            try {
                const response = await fetch(`https://api.netlify.com/api/v1/sites/${API_CONFIG.netlify.siteId}`, {
                    headers: { 'Authorization': `Bearer ${API_CONFIG.netlify.token}` }
                });
                results.netlify = response.ok;
            } catch (e) { results.netlify = false; }

            return results;
        }

        // Mettre √† jour le statut des APIs
        async function updateAPIStatus() {
            const results = await testAPIs();
            const statusElements = document.querySelectorAll('.api-card .status');
            
            statusElements[0].textContent = results.openai ? '‚úÖ Active' : '‚ùå Inactive';
            statusElements[0].className = results.openai ? 'status status-active' : 'status status-inactive';
            
            statusElements[1].textContent = results.anthropic ? '‚úÖ Active' : '‚ùå Inactive';
            statusElements[1].className = results.anthropic ? 'status status-active' : 'status status-inactive';
            
            statusElements[2].textContent = results.replicate ? '‚úÖ Active' : '‚ùå Inactive';
            statusElements[2].className = results.replicate ? 'status status-active' : 'status status-inactive';
            
            statusElements[3].textContent = results.netlify ? '‚úÖ Active' : '‚ùå Inactive';
            statusElements[3].className = results.netlify ? 'status status-active' : 'status status-inactive';
        }

        // Double v√©rification SEO
        function validateSEO(content, keyword) {
            const validation = {
                score: 0,
                issues: [],
                passedChecks: [],
                failedChecks: [],
                metrics: {}
            };

            // Compter les mots
            const wordCount = content.split(/\s+/).length;
            validation.metrics.wordCount = wordCount;

            // V√©rifier la longueur du contenu
            if (wordCount >= 2000 && wordCount <= 2600) {
                validation.score += 20;
                validation.passedChecks.push('Longueur contenu optimale (2000-2600 mots)');
            } else {
                validation.score -= 10;
                validation.failedChecks.push('Longueur contenu hors limites');
                validation.issues.push({
                    type: 'content_length',
                    severity: wordCount < 2000 ? 'medium' : 'high',
                    message: `Contenu de ${wordCount} mots (recommand√©: 2000-2600)`,
                    solution: wordCount < 2000 ? 'Ajouter 500-1000 mots' : 'R√©duire √† 2600 mots maximum'
                });
            }

            // V√©rifier la densit√© de mots-cl√©s
            const keywordRegex = new RegExp(keyword.replace(/-/g, ' '), 'gi');
            const keywordMatches = content.match(keywordRegex) || [];
            const keywordDensity = (keywordMatches.length / wordCount) * 100;
            validation.metrics.keywordDensity = keywordDensity;

            if (keywordDensity >= 0.8 && keywordDensity <= 1.2) {
                validation.score += 15;
                validation.passedChecks.push('Densit√© mots-cl√©s optimale');
            } else {
                validation.score -= 10;
                validation.failedChecks.push('Densit√© mots-cl√©s incorrecte');
                validation.issues.push({
                    type: 'keyword_density',
                    severity: 'medium',
                    message: `Densit√©: ${keywordDensity.toFixed(2)}% (recommand√©: 0.8-1.2%)`,
                    solution: keywordDensity < 0.8 ? 'Ajouter des occurrences du mot-cl√©' : 'R√©duire la densit√©'
                });
            }

            // V√©rifier la structure H1/H2/H3
            const h1Count = (content.match(/<h1>/g) || []).length;
            const h2Count = (content.match(/<h2>/g) || []).length;
            const h3Count = (content.match(/<h3>/g) || []).length;
            
            validation.metrics.headings = { h1: h1Count, h2: h2Count, h3: h3Count };

            if (h1Count === 1) {
                validation.score += 10;
                validation.passedChecks.push('Structure H1 correcte');
            } else {
                validation.score -= 15;
                validation.failedChecks.push('Structure H1 incorrecte');
                validation.issues.push({
                    type: 'h1_structure',
                    severity: 'high',
                    message: `${h1Count} balises H1 (recommand√©: 1)`,
                    solution: 'Garder une seule balise H1 par page'
                });
            }

            if (h2Count >= 4 && h2Count <= 8) {
                validation.score += 10;
                validation.passedChecks.push('Structure H2 optimale');
            } else {
                validation.score -= 5;
                validation.failedChecks.push('Structure H2 incorrecte');
                validation.issues.push({
                    type: 'h2_structure',
                    severity: 'medium',
                    message: `${h2Count} balises H2 (recommand√©: 4-8)`,
                    solution: h2Count < 4 ? 'Ajouter des sous-titres H2' : 'R√©duire le nombre de H2'
                });
            }

            // V√©rifier les images
            const imgCount = (content.match(/<img/g) || []).length;
            validation.metrics.imageCount = imgCount;

            if (imgCount >= 3 && imgCount <= 6) {
                validation.score += 10;
                validation.passedChecks.push('Nombre d\'images optimal');
            } else {
                validation.score -= 5;
                validation.failedChecks.push('Nombre d\'images incorrect');
                validation.issues.push({
                    type: 'image_count',
                    severity: 'medium',
                    message: `${imgCount} images (recommand√©: 3-6)`,
                    solution: imgCount < 3 ? 'Ajouter des images' : 'R√©duire le nombre d\'images'
                });
            }

            // V√©rifier les liens internes
            const internalLinks = (content.match(/href="\/[^"]*"/g) || []).length;
            validation.metrics.internalLinks = internalLinks;

            if (internalLinks >= 5) {
                validation.score += 10;
                validation.passedChecks.push('Liens internes suffisants');
            } else {
                validation.score -= 5;
                validation.failedChecks.push('Liens internes insuffisants');
                validation.issues.push({
                    type: 'internal_links',
                    severity: 'medium',
                    message: `${internalLinks} liens internes (recommand√©: 5+)`,
                    solution: 'Ajouter des liens vers d\'autres pages du site'
                });
            }

            // V√©rifier la m√©ta description
            const metaDescription = content.match(/<meta name="description" content="([^"]*)"/);
            if (metaDescription && metaDescription[1].length >= 120 && metaDescription[1].length <= 160) {
                validation.score += 10;
                validation.passedChecks.push('Meta description optimale');
            } else {
                validation.score -= 5;
                validation.failedChecks.push('Meta description incorrecte');
                validation.issues.push({
                    type: 'meta_description',
                    severity: 'medium',
                    message: 'Meta description hors limites 120-160 caract√®res',
                    solution: 'Optimiser la longueur de la meta description'
                });
            }

            // V√©rifier le titre
            const title = content.match(/<title>([^<]*)<\/title>/);
            if (title && title[1].length >= 30 && title[1].length <= 60) {
                validation.score += 15;
                validation.passedChecks.push('Titre optimal');
            } else {
                validation.score -= 10;
                validation.failedChecks.push('Titre incorrect');
                validation.issues.push({
                    type: 'title_length',
                    severity: 'high',
                    message: 'Titre hors limites 30-60 caract√®res',
                    solution: 'Optimiser la longueur du titre'
                });

            // Calculer la note finale
            validation.score = Math.max(0, Math.min(100, validation.score));
            
            // G√©n√©rer un article HTML complet
        function generateHTMLArticle(keyword, content, schemas = null) {
            const keywordText = keyword.replace(/-/g, ' ');
            const location = getLocationFromKeyword(keyword);
            
            // Si les sch√©mas ne sont pas fournis, les g√©n√©rer
            if (!schemas) {
                schemas = generateSchemas(keyword, content);
            }
            
            // G√©n√©rer les sch√©mas JSON-LD
            const schemaTags = Object.entries(schemas).map(([key, schema]) => 
                `<script type="application/ld+json">${JSON.stringify(schema, null, 2)}</script>`
            ).join('\n    ');
            
            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${keywordText.toUpperCase()} - Guide Complet ECOFUNDRIVE 2024</title>
    <meta name="description" content="D√©couvrez notre guide complet pour ${keywordText}. Service VTC premium disponible sur la C√¥te d'Azur. R√©servez votre transport Tesla au +33 6 16 55 28 11.">
    <meta name="keywords" content="${keywordText}, VTC, ECOFUNDRIVE, ${location}, C√¥te d'Azur, transport premium, Tesla">
    <meta name="author" content="ECOFUNDRIVE">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:title" content="${keywordText.toUpperCase()} - Guide Complet ECOFUNDRIVE 2024">
    <meta property="og:description" content="D√©couvrez notre guide complet pour ${keywordText}. Service VTC premium disponible sur la C√¥te d'Azur.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ecofundrive.com/${keyword}">
    <meta property="og:image" content="https://ecofundrive.com/images/${keyword}-hero.jpg">
    <meta property="og:site_name" content="ECOFUNDRIVE">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="${keywordText.toUpperCase()} - Guide Complet ECOFUNDRIVE 2024">
    <meta name="twitter:description" content="D√©couvrez notre guide complet pour ${keywordText}. Service VTC premium disponible sur la C√¥te d'Azur.">
    <meta name="twitter:image" content="https://ecofundrive.com/images/${keyword}-hero.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://ecofundrive.com/${keyword}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- JSON-LD Schemas -->
    ${schemaTags}
    
    <!-- Styles -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        .header-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .header-content p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .breadcrumb {
            background: #e9ecef;
            padding: 1rem 0;
        }
        
        .breadcrumb-list {
            display: flex;
            align-items: center;
            list-style: none;
            font-size: 0.9rem;
        }
        
        .breadcrumb-list li {
            margin-right: 0.5rem;
        }
        
        .breadcrumb-list li:not(:last-child)::after {
            content: "‚Ä∫";
            margin-left: 0.5rem;
            color: #6c757d;
        }
        
        .breadcrumb-list a {
            color: #667eea;
            text-decoration: none;
        }
        
        .breadcrumb-list a:hover {
            text-decoration: underline;
        }
        
        main {
            background: white;
            padding: 3rem 0;
            margin: 2rem 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .article-content {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .article-content h1 {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .article-content h2 {
            font-size: 1.5rem;
            color: #764ba2;
            margin: 2rem 0 1rem 0;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }
        
        .article-content h3 {
            font-size: 1.2rem;
            color: #333;
            margin: 1.5rem 0 0.5rem 0;
        }
        
        .article-content p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .article-content ul, .article-content ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        .article-content li {
            margin-bottom: 0.5rem;
        }
        
        .article-content strong, .article-content b {
            color: #667eea;
            font-weight: 600;
        }
        
        .cta-section {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 3rem 0;
            text-align: center;
            margin: 3rem 0;
        }
        
        .cta-section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .cta-section p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        
        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: white;
            color: #28a745;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-whatsapp {
            background: #25d366;
            color: white;
        }
        
        .btn-phone {
            background: #007bff;
            color: white;
        }
        
        .faq-section {
            background: #f8f9fa;
            padding: 3rem 0;
            margin: 2rem 0;
        }
        
        .faq-section h2 {
            text-align: center;
            color: #667eea;
            margin-bottom: 2rem;
        }
        
        .faq-item {
            background: white;
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .faq-question {
            padding: 1.5rem;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-weight: 600;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 1.1rem;
        }
        
        .faq-question:hover {
            background: #5a6fd8;
        }
        
        .faq-answer {
            padding: 1.5rem;
            display: none;
            line-height: 1.6;
        }
        
        .faq-item.active .faq-answer {
            display: block;
        }
        
        .faq-item.active .faq-question {
            background: #5a6fd8;
        }
        
        footer {
            background: #2c3e50;
            color: white;
            padding: 3rem 0 1rem 0;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-section h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 0.5rem;
        }
        
        .footer-section a {
            color: #bdc3c7;
            text-decoration: none;
        }
        
        .footer-section a:hover {
            color: #667eea;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #34495e;
            color: #95a5a6;
        }
        
        @media (max-width: 768px) {
            .header-content h1 {
                font-size: 2rem;
            }
            
            .article-content {
                font-size: 1rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>${keywordText.toUpperCase()} - Guide Complet ECOFUNDRIVE 2024</h1>
                <p>Service VTC Premium Tesla sur la C√¥te d'Azur - Disponible 24/7</p>
            </div>
        </div>
    </header>
    
    <nav class="breadcrumb">
        <div class="container">
            <ul class="breadcrumb-list">
                <li><a href="/">Accueil</a></li>
                <li><a href="/destinations">Destinations</a></li>
                <li><a href="/${location.toLowerCase()}">${location}</a></li>
                <li>${keywordText}</li>
            </ul>
        </div>
    </nav>
    
    <main>
        <div class="container">
            <article class="article-content">
                ${content}
            </article>
        </div>
    </main>
    
    <section class="cta-section">
        <div class="container">
            <h2>R√©servez Votre VTC Premium Maintenant</h2>
            <p>Service disponible 24/7 pour tous vos d√©placements sur la C√¥te d'Azur</p>
            <div class="cta-buttons">
                <a href="tel:+33616552811" class="btn btn-phone">
                    üìû +33 6 16 55 28 11
                </a>
                <a href="https://wa.me/33616552811" class="btn btn-whatsapp">
                    üí¨ WhatsApp
                </a>
            </div>
        </div>
    </section>
    
    <section class="faq-section">
        <div class="container">
            <h2>Questions Fr√©quentes</h2>
            <div class="faq-item">
                <button class="faq-question">Quel est le prix d'un VTC pour ${keywordText} ?</button>
                <div class="faq-answer">
                    <p>Nos tarifs pour ${keywordText} commencent √† 150‚Ç¨. Contactez-nous au +33 6 16 55 28 11 pour un devis personnalis√© selon votre trajet exact.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Comment r√©server un VTC pour ${keywordText} ?</button>
                <div class="faq-answer">
                    <p>R√©servez votre VTC pour ${keywordText} par t√©l√©phone au +33 6 16 55 28 11, par WhatsApp ou via notre formulaire en ligne. Service disponible 24/7.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Quelle est la dur√©e du trajet vers ${keywordText} ?</button>
                <div class="faq-answer">
                    <p>La dur√©e d√©pend de votre point de d√©part. En moyenne, comptez 30-90 minutes pour rejoindre ${keywordText} depuis les principales villes de la C√¥te d'Azur.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Quels v√©hicules proposez-vous pour ${keywordText} ?</button>
                <div class="faq-answer">
                    <p>Nous proposons des Tesla Model S et Model X, parfaitement √©quip√©s pour votre confort. Int√©rieur cuir, climatisation, WiFi et chargement USB inclus.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Le service VTC pour ${keywordText} est-il disponible 24/7 ?</button>
                <div class="faq-answer">
                    <p>Oui, notre service VTC est disponible 24h/24 et 7j/7 pour ${keywordText}. R√©servation possible √† tout moment pour vos d√©placements professionnels ou personnels.</p>
                </div>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ECOFUNDRIVE</h3>
                    <p>Service VTC premium Tesla sur la C√¥te d'Azur. Fiabilit√©, confort et √©l√©gance pour tous vos d√©placements.</p>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="/vtc-aeroport">Transferts A√©roport</a></li>
                        <li><a href="/vtc-corporate">Services Entreprises</a></li>
                        <li><a href="/vtc-evenements">√âv√©nements Sp√©ciaux</a></li>
                        <li><a href="/vtc-mise-a-disposition">Mise √† Disposition</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Destinations</h3>
                    <ul>
                        <li><a href="/vtc-nice">Nice</a></li>
                        <li><a href="/vtc-monaco">Monaco</a></li>
                        <li><a href="/vtc-cannes">Cannes</a></li>
                        <li><a href="/vtc-saint-tropez">Saint-Tropez</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <ul>
                        <li>üìû +33 6 16 55 28 11</li>
                        <li>üìß contact@ecofundrive.com</li>
                        <li>üìç Nice, C√¥te d'Azur</li>
                        <li>üïê 24/7 Disponible</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 ECOFUNDRIVE. Tous droits r√©serv√©s. | VTC Premium Tesla C√¥te d'Azur</p>
            </div>
        </div>
    </footer>
    
    <script>
        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', () => {
                const faqItem = button.parentElement;
                const isActive = faqItem.classList.contains('active');
                
                // Close all FAQ items
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Open current item if it was closed
                if (!isActive) {
                    faqItem.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>`;
        }
        
        // G√©n√©rer les 7 sch√©mas JSON-LD obligatoires
        function generateSchemas(keyword, content) {
            const keywordText = keyword.replace(/-/g, ' ');
            const location = getLocationFromKeyword(keyword);
            
            return {
                article: {
                    "@context": "https://schema.org",
                    "@type": "Article",
                    "headline": `${keywordText.toUpperCase()} - Guide Complet ECOFUNDRIVE 2024`,
                    "description": `D√©couvrez notre guide complet pour ${keywordText}. Service VTC premium disponible sur la C√¥te d'Azur.`,
                    "author": {
                        "@type": "Organization",
                        "name": "ECOFUNDRIVE"
                    },
                    "publisher": {
                        "@type": "Organization", 
                        "name": "ECOFUNDRIVE",
                        "logo": {
                            "@type": "ImageObject",
                            "url": "https://ecofundrive.com/logo.png"
                        }
                    },
                    "datePublished": new Date().toISOString(),
                    "dateModified": new Date().toISOString(),
                    "wordCount": content.split(/\s+/).length,
                    "inLanguage": "fr"
                },
                service: {
                    "@context": "https://schema.org",
                    "@type": "Service",
                    "serviceType": "VTC Premium Tesla",
                    "provider": {
                        "@type": "Organization",
                        "name": "ECOFUNDRIVE"
                    },
                    "areaServed": {
                        "@type": "Place",
                        "name": location
                    },
                    "description": `Service VTC premium pour ${keywordText}`,
                    "offers": {
                        "@type": "Offer",
                        "price": "150",
                        "priceCurrency": "EUR",
                        "availability": "https://schema.org/InStock"
                    }
                },
                faqPage: {
                    "@context": "https://schema.org",
                    "@type": "FAQPage",
                    "mainEntity": [
                        {
                            "@type": "Question",
                            "name": `Quel est le prix d'un VTC pour ${keywordText} ?`,
                            "acceptedAnswer": {
                                "@type": "Answer",
                                "text": `Nos tarifs pour ${keywordText} commencent √† 150‚Ç¨. Contactez-nous au +33 6 16 55 28 11 pour un devis personnalis√© selon votre trajet.`
                            }
                        },
                        {
                            "@type": "Question", 
                            "name": `Comment r√©server un VTC pour ${keywordText} ?`,
                            "acceptedAnswer": {
                                "@type": "Answer",
                                "text": `R√©servez votre VTC pour ${keywordText} par t√©l√©phone au +33 6 16 55 28 11, par WhatsApp ou via notre formulaire en ligne. Service disponible 24/7.`
                            }
                        },
                        {
                            "@type": "Question",
                            "name": `Quelle est la dur√©e du trajet vers ${keywordText} ?`,
                            "acceptedAnswer": {
                                "@type": "Answer",
                                "text": `La dur√©e d√©pend de votre point de d√©part. En moyenne, comptez 30-90 minutes pour rejoindre ${keywordText} depuis les principales villes de la C√¥te d'Azur.`
                            }
                        },
                        {
                            "@type": "Question",
                            "name": `Quels v√©hicules proposez-vous pour ${keywordText} ?`,
                            "acceptedAnswer": {
                                "@type": "Answer",
                                "text": `Nous proposons des Tesla Model S et Model X, parfaitement √©quip√©s pour votre confort. Int√©rieur cuir, climatisation, WiFi et chargement USB inclus.`
                            }
                        },
                        {
                            "@type": "Question",
                            "name": `Le service VTC pour ${keywordText} est-il disponible 24/7 ?`,
                            "acceptedAnswer": {
                                "@type": "Answer",
                                "text": `Oui, notre service VTC est disponible 24h/24 et 7j/7 pour ${keywordText}. R√©servation possible √† tout moment pour vos d√©placements professionnels ou personnels.`
                            }
                        }
                    ]
                },
                breadcrumbList: {
                    "@context": "https://schema.org",
                    "@type": "BreadcrumbList",
                    "itemListElement": [
                        {
                            "@type": "ListItem",
                            "position": 1,
                            "name": "Accueil",
                            "item": "https://ecofundrive.com"
                        },
                        {
                            "@type": "ListItem", 
                            "position": 2,
                            "name": "Destinations",
                            "item": "https://ecofundrive.com/destinations"
                        },
                        {
                            "@type": "ListItem",
                            "position": 3,
                            "name": location,
                            "item": `https://ecofundrive.com/${location.toLowerCase()}`
                        },
                        {
                            "@type": "ListItem",
                            "position": 4,
                            "name": keywordText,
                            "item": `https://ecofundrive.com/${keyword}`
                        }
                    ]
                },
                aggregateRating: {
                    "@context": "https://schema.org",
                    "@type": "AggregateRating",
                    "itemReviewed": {
                        "@type": "LocalBusiness",
                        "name": "ECOFUNDRIVE"
                    },
                    "ratingValue": "5.0",
                    "reviewCount": "26",
                    "bestRating": "5",
                    "worstRating": "1"
                },
                organization: {
                    "@context": "https://schema.org",
                    "@type": "Organization",
                    "name": "ECOFUNDRIVE",
                    "url": "https://ecofundrive.com",
                    "logo": "https://ecofundrive.com/logo.png",
                    "contactPoint": {
                        "@type": "ContactPoint",
                        "telephone": "+33 6 16 55 28 11",
                        "contactType": "customer service",
                        "availableLanguage": ["French", "English"]
                    },
                    "sameAs": [
                        "https://www.facebook.com/ecofundrive",
                        "https://www.instagram.com/ecofundrive"
                    ]
                },
                localBusiness: {
                    "@context": "https://schema.org",
                    "@type": "LocalBusiness",
                    "name": "ECOFUNDRIVE",
                    "description": "Service VTC premium Tesla sur la C√¥te d'Azur",
                    "url": "https://ecofundrive.com",
                    "telephone": "+33 6 16 55 28 11",
                    "email": "contact@ecofundrive.com",
                    "address": {
                        "@type": "PostalAddress",
                        "addressLocality": "Nice",
                        "postalCode": "06000",
                        "addressCountry": "FR"
                    },
                    "geo": {
                        "@type": "GeoCoordinates",
                        "latitude": "43.7102",
                        "longitude": "7.2620"
                    },
                    "openingHours": "Mo-Su 00:00-23:59",
                    "priceRange": "‚Ç¨‚Ç¨‚Ç¨",
                    "paymentAccepted": ["Cash", "Credit Card", "PayPal"],
                    "currenciesAccepted": "EUR"
                }
            };
        }

        // Obtenir la localisation depuis le mot-cl√©
        function getLocationFromKeyword(keyword) {
            if (keyword.includes('nice')) return 'Nice';
            if (keyword.includes('monaco')) return 'Monaco';
            if (keyword.includes('cannes')) return 'Cannes';
            if (keyword.includes('saint-tropez')) return 'Saint-Tropez';
            return 'C√¥te d\'Azur';
        }

        // Boucle de correction it√©rative (3 tentatives max)
        async function generateAndOptimizeContent(keyword) {
            let content = getTemplate(keyword);
            let validation = validateSEO(content, keyword);
            let attempt = 1;
            const maxAttempts = 3;
            const targetScore = 90;
            
            while (validation.score < targetScore && attempt <= maxAttempts) {
                console.log(`üîÑ Tentative ${attempt}/${maxAttempts}: Score ${validation.score}/100`);
                
                // Simuler correction avec GPT-4
                content = await simulateGTPOptimization(content, validation.issues, keyword);
                validation = validateSEO(content, keyword);
                attempt++;
                
                // Progress update
                progressText.textContent = `Correction SEO ${attempt-1}/${maxAttempts}: ${keyword} (${validation.score}/100)`;
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            return {
                content: content,
                validation: validation,
                attempts: attempt - 1,
                success: validation.score >= targetScore
            };
        }

        // Simulation d'optimisation GPT-4
        async function simulateGTPOptimization(content, issues, keyword) {
            await new Promise(resolve => setTimeout(resolve, 800));
            
            // Simuler des corrections bas√©es sur les probl√®mes
            let optimizedContent = content;
            
            if (issues.some(i => i.type === 'content_length')) {
                // Ajouter du contenu si trop court
                optimizedContent += addMoreContent(keyword);
            }
            
            if (issues.some(i => i.type === 'keyword_density')) {
                // Ajuster la densit√© de mots-cl√©s
                optimizedContent = adjustKeywordDensity(optimizedContent, keyword);
            }
            
            if (issues.some(i => i.type === 'h1_structure')) {
                // Corriger la structure H1
                optimizedContent = fixH1Structure(optimizedContent, keyword);
            }
            
            return optimizedContent;
        }

        // Ajouter du contenu suppl√©mentaire
        function addMoreContent(keyword) {
            return `
                <h2>Informations Compl√©mentaires</h2>
                <p>Pour compl√©ter votre exp√©rience avec ${keyword.replace(/-/g, ' ')}, notre service VTC ECOFUNDRIVE vous garantit un transport de qualit√© sup√©rieure. Nos chauffeurs professionnels connaissent parfaitement la r√©gion et vous assureront un voyage confortable et s√©curis√©.</p>
                
                <h3>Pourquoi choisir ECOFUNDRIVE?</h3>
                <p>Notre entreprise se distingue par sa fiabilit√©, sa ponctualit√© et son service client exceptionnel. Que ce soit pour un transfert a√©roport, une mise √† disposition journ√©e ou une soir√©e sp√©ciale, nous adaptons nos services √† vos besoins sp√©cifiques.</p>
                
                <h3>Service Disponible 24/7</h3>
                <p>Notre √©quipe est disponible √† tout moment pour r√©pondre √† vos demandes. Contactez-nous au +33 6 16 55 28 11 pour r√©server votre VTC.</p>
            `;
        }

        // Ajuster la densit√© de mots-cl√©s
        function adjustKeywordDensity(content, keyword) {
            const keywordText = keyword.replace(/-/g, ' ');
            const additionalText = `<p>Profitez d'un service exceptionnel avec ${keywordText}. Notre expertise en ${keywordText} garantit votre satisfaction.</p>`;
            return content.replace(/<\/h2>/g, `</h2>${additionalText}`);
        }

        // Corriger la structure H1
        function fixH1Structure(content, keyword) {
            const keywordText = keyword.replace(/-/g, ' ').toUpperCase();
            const h1Regex = /<h1>.*?<\/h1>/g;
            const h1Match = content.match(h1Regex);
            
            if (h1Match && h1Match.length > 1) {
                // Garder seulement le premier H1
                let fixedContent = content;
                for (let i = 1; i < h1Match.length; i++) {
                    fixedContent = fixedContent.replace(h1Match[i], `<h2>${keywordText}</h2>`);
                }
                return fixedContent;
            }
            
            return content;
        }

        // G√©n√©ration du site
        async function startGeneration() {
            const btn = document.getElementById('generateBtn');
            const progressDiv = document.getElementById('progress');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const results = document.getElementById('results');
            const resultsContent = document.getElementById('resultsContent');

            btn.disabled = true;
            btn.textContent = 'üîÑ G√©n√©ration en cours...';
            progressDiv.style.display = 'block';
            results.style.display = 'none';

            const articles = {};
            let currentProgress = 0;

            // G√©n√©rer chaque article
            for (let i = 0; i < KEYWORDS.length; i++) {
                const keyword = KEYWORDS[i];
                progressText.textContent = `G√©n√©ration de l'article ${i + 1}/${KEYWORDS.length}: ${keyword}`;
                progressFill.style.width = `${((i + 1) / KEYWORDS.length) * 40}%`;

                // Simuler un d√©lai de g√©n√©ration
                await new Promise(resolve => setTimeout(resolve, 1000));

                // G√©n√©ration et optimisation avec boucle de correction
                const result = await generateAndOptimizeContent(keyword);
                
                // G√©n√©rer les sch√©mas JSON-LD
                const schemas = generateSchemas(keyword, result.content);
                
                const html = generateHTMLArticle(keyword, result.content, schemas);
                
                progressText.textContent = `Finalisation de l'article ${i + 1}/${KEYWORDS.length}: ${keyword}`;
                progressFill.style.width = `${((i + 1) / KEYWORDS.length) * 75}%`;

                await new Promise(resolve => setTimeout(resolve, 500));
                
                articles[keyword] = {
                    keyword: keyword,
                    content: result.content,
                    html: html,
                    wordCount: result.content.split(/\s+/).length,
                    seoValidation: result.validation,
                    attempts: result.attempts,
                    success: result.success
                };
            }

            // G√©n√©rer la homepage
            progressText.textContent = 'G√©n√©ration de la homepage...';
            progressFill.style.width = '90%';
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const homepage = generateHomepage(articles);
            
            // Validation SEO finale
            progressText.textContent = 'Validation SEO finale...';
            progressFill.style.width = '95%';
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Calculer les scores SEO moyens
            const seoScores = Object.values(articles).map(a => a.seoValidation.score);
            const averageSEOScore = Math.round(seoScores.reduce((a, b) => a + b, 0) / seoScores.length);
            const successfulArticles = Object.values(articles).filter(a => a.success).length;
            const totalAttempts = Object.values(articles).reduce((sum, a) => sum + a.attempts, 0);
            
            // Afficher les r√©sultats
            progressDiv.style.display = 'none';
            results.style.display = 'block';
            
            let resultsHTML = '<div class="result-item"><h3>üìä G√©n√©ration Termin√©e avec Succ√®s!</h3>';
            resultsHTML += `<p><strong>Articles g√©n√©r√©s:</strong> ${KEYWORDS.length}</p>`;
            resultsHTML += `<p><strong>Articles valid√©s (‚â•90/100):</strong> ${successfulArticles}/${KEYWORDS.length}</p>`;
            resultsHTML += `<p><strong>Score SEO moyen:</strong> ${averageSEOScore}/100</p>`;
            resultsHTML += `<p><strong>Total tentatives:</strong> ${totalAttempts} (moyenne: ${(totalAttempts/KEYWORDS.length).toFixed(1)}/article)</p>`;
            resultsHTML += `<p><strong>Mots totaux:</strong> ${Object.values(articles).reduce((sum, a) => sum + a.wordCount, 0)}</p>`;
            resultsHTML += `<p><strong>Homepage:</strong> G√©n√©r√©e avec tous les articles</p>`;
            resultsHTML += '</div>';

            // Logs d√©taill√©s du processus
            resultsHTML += '<div class="result-item"><h3>üîÑ Logs D√©taill√©s du Processus</h3>';
            
            Object.entries(articles).forEach(([keyword, article]) => {
                const validation = article.seoValidation;
                const statusColor = article.success ? '#28a745' : '#dc3545';
                const statusIcon = article.success ? '‚úÖ' : '‚ùå';
                
                resultsHTML += `
                    <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid ${statusColor};">
                        <h4 style="color: ${statusColor}; margin-bottom: 10px;">
                            ${statusIcon} ${keyword.replace(/-/g, ' ').toUpperCase()} - ${article.attempts} tentative(s)
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 10px 0;">
                            <span><strong>üìù Score final:</strong> ${validation.score}/100 (${validation.grade})</span>
                            <span><strong>üìä Mots:</strong> ${validation.metrics.wordCount}</span>
                            <span><strong>üéØ Densit√©:</strong> ${validation.metrics.keywordDensity?.toFixed(2)}%</span>
                            <span><strong>üì∞ Structure:</strong> H1:${validation.metrics.headings?.h1 || 0} H2:${validation.metrics.headings?.h2 || 0}</span>
                            <span><strong>üñºÔ∏è Images:</strong> ${validation.metrics.imageCount || 0}</span>
                            <span><strong>üîó Liens:</strong> ${validation.metrics.internalLinks || 0}</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            <strong>Processus:</strong> G√©n√©ration ‚Üí Validation SEO ‚Üí ${article.attempts > 1 ? `${article.attempts-1} correction(s) ‚Üí ` : ''}Finalisation
                        </div>
                        ${validation.issues.length > 0 ? `
                            <div style="margin-top: 10px;">
                                <strong>‚ö†Ô∏è Probl√®mes r√©solus:</strong>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    ${validation.issues.slice(0, 2).map(issue => `<li>${issue.message}</li>`).join('')}
                                </ul>
                            </div>
                        ` : '<p style="color: #28a745; margin-top: 10px;">‚úÖ Validation r√©ussie sans correction</p>'}
                    </div>
                `;
            });
            
            resultsHTML += '</div>';

            // Boutons de t√©l√©chargement
            resultsHTML += '<div class="result-item"><h3>üì• T√©l√©charger les Fichiers</h3>';
            
            // T√©l√©charger chaque article
            Object.entries(articles).forEach(([keyword, article]) => {
                const blob = new Blob([article.html], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                resultsHTML += `<a href="${url}" download="${keyword}.html" class="download-btn">üìÑ ${keyword}.html</a>`;
            });

            // T√©l√©charger la homepage
            const homepageBlob = new Blob([homepage], { type: 'text/html' });
            const homepageUrl = URL.createObjectURL(homepageBlob);
            resultsHTML += `<a href="${homepageUrl}" download="index.html" class="download-btn">üè† index.html</a>`;

            resultsHTML += '</div>';
            
            resultsContent.innerHTML = resultsHTML;

            btn.disabled = false;
            btn.textContent = 'üöÄ RELANCER G√âN√âRATION';
        }

        // G√©n√©rer un article HTML complet
        function generateHTMLArticle(keyword, content) {
            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${keyword.replace(/-/g, ' ').toUpperCase()} - ECOFUNDRIVE</title>
    <meta name="description" content="D√©couvrez ${keyword.replace(/-/g, ' ')} avec ECOFUNDRIVE - VTC premium sur la C√¥te d'Azur">
    <meta name="keywords" content="${keyword}, VTC Nice, transport luxe, C√¥te d'Azur">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #1877f2 0%, #0c5dd8 100%); color: white; padding: 40px 20px; text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .content { background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: #1877f2; margin-bottom: 20px; font-size: 2em; }
        h2 { color: #1877f2; margin: 30px 0 15px; font-size: 1.5em; }
        h3 { color: #333; margin: 20px 0 10px; font-size: 1.2em; }
        p { margin-bottom: 15px; }
        ul { margin: 15px 0 15px 30px; }
        li { margin-bottom: 8px; }
        .cta-section { background: #f8f9fa; border-radius: 10px; padding: 30px; margin: 30px 0; text-align: center; }
        .contact-info { background: white; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .contact-info p { margin: 10px 0; }
        a { color: #1877f2; text-decoration: none; }
        a:hover { text-decoration: underline; }
        strong { color: #1877f2; }
        .faq { background: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .faq p { margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üöó ECOFUNDRIVE</h1>
            <p>VTC Premium sur la C√¥te d'Azur</p>
        </div>
    </div>
    
    <div class="container">
        <div class="content">
            ${content}
            
            <div class="cta-section">
                <h2>üöó R√©servez votre VTC ECOFUNDRIVE</h2>
                <p>Service premium, ponctuel et confortable sur toute la C√¥te d'Azur</p>
                <div class="contact-info">
                    <p><strong>üìû T√©l√©phone:</strong> +33 6 16 55 28 11</p>
                    <p><strong>üí¨ WhatsApp:</strong> <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a></p>
                    <p><strong>üìß Email:</strong> 8888vtc@gmail.com</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>`;
        }

        // G√©n√©rer la homepage
        function generateHomepage(articles) {
            const articlesList = Object.values(articles).map(article => `
                <div class="article-card">
                    <h3><a href="${article.keyword}.html">${article.keyword.replace(/-/g, ' ').toUpperCase()}</a></h3>
                    <p>D√©couvrez notre guide complet pour ${article.keyword.replace(/-/g, ' ')}. Service VTC premium disponible.</p>
                    <div class="article-meta">
                        <span>üìÑ ${article.wordCount} mots</span>
                        <span>üöó VTC disponible</span>
                    </div>
                </div>
            `).join('');

            return `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOFUNDRIVE - VTC Premium C√¥te d'Azur</title>
    <meta name="description" content="ECOFUNDRIVE - Service VTC premium sur la C√¥te d'Azur. Transferts Nice, Monaco, Cannes, Saint-Tropez.">
    <meta name="keywords" content="VTC Nice, transport luxe, C√¥te d'Azur, transfert a√©roport">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #1877f2 0%, #0c5dd8 100%); color: white; padding: 60px 20px; text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 3em; margin-bottom: 15px; }
        .header p { font-size: 1.3em; opacity: 0.9; }
        .hero { background: white; border-radius: 15px; padding: 40px; margin-bottom: 40px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .hero h2 { color: #1877f2; margin-bottom: 20px; font-size: 2em; }
        .articles-section { background: white; border-radius: 15px; padding: 40px; margin-bottom: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .articles-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; margin-top: 30px; }
        .article-card { background: #f8f9fa; border-radius: 10px; padding: 25px; border-left: 4px solid #1877f2; transition: transform 0.3s; }
        .article-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .article-card h3 { margin-bottom: 10px; }
        .article-card h3 a { color: #1877f2; text-decoration: none; font-size: 1.3em; }
        .article-card h3 a:hover { text-decoration: underline; }
        .article-meta { margin-top: 15px; font-size: 0.9em; color: #666; }
        .article-meta span { margin-right: 15px; }
        .cta-section { background: linear-gradient(135deg, #1877f2 0%, #0c5dd8 100%); color: white; border-radius: 15px; padding: 40px; text-align: center; margin-bottom: 40px; }
        .cta-section h2 { font-size: 2em; margin-bottom: 20px; }
        .contact-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
        .contact-item { background: rgba(255,255,255,0.1); border-radius: 10px; padding: 20px; }
        .contact-item h3 { margin-bottom: 10px; }
        .contact-item a { color: white; text-decoration: none; font-size: 1.1em; }
        .contact-item a:hover { text-decoration: underline; }
        .footer { background: #333; color: white; text-align: center; padding: 30px 20px; border-radius: 15px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üöó ECOFUNDRIVE</h1>
            <p>VTC Premium sur la C√¥te d'Azur - Nice, Monaco, Cannes, Saint-Tropez</p>
        </div>
    </div>
    
    <div class="container">
        <div class="hero">
            <h2>üåü Service VTC de Luxe</h2>
            <p>Transferts professionnels, confortables et ponctuels. Chauffeurs exp√©riment√©s, v√©hicules premium, disponible 24/7.</p>
        </div>

        <div class="articles-section">
            <h2>üìñ Guides Complets - Destinations Premium</h2>
            <div class="articles-grid">
                ${articlesList}
            </div>
        </div>

        <div class="cta-section">
            <h2>üöÄ R√©servez Votre VTC Maintenant</h2>
            <p>Service premium sur toute la C√¥te d'Azur. Disponible 24h/24 et 7j/7.</p>
            <div class="contact-grid">
                <div class="contact-item">
                    <h3>üìû T√©l√©phone</h3>
                    <a href="tel:+33616552811">+33 6 16 55 28 11</a>
                </div>
                <div class="contact-item">
                    <h3>üí¨ WhatsApp</h3>
                    <a href="https://wa.me/33616552811">+33 6 16 55 28 11</a>
                </div>
                <div class="contact-item">
                    <h3>üìß Email</h3>
                    <a href="mailto:8888vtc@gmail.com">8888vtc@gmail.com</a>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 ECOFUNDRIVE - VTC Premium C√¥te d'Azur | SIRET: 91224469600015</p>
        </div>
    </div>
</body>
</html>`;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            updateAPIStatus();
        });
    </script>
</body>
</html>
